var game=function(){var e=document.getElementById("canvas"),t=e.getContext("2d"),i={x:0,y:475,h:25,w:25,fill:"#fff",dir:"right",speed:5},l={x:50,y:0,h:10,w:10,fill:"#ff0",speed:5},n={},r=null,f=null,d=!1,h=0,a=250,c=1,o=0,y=0,w=0;function x(){r=setInterval(()=>{for(var t="",i="abcdefghijklmnopqrstuvwxyz",r=0;r<10;r++)t+=i.charAt(Math.floor(Math.random()*i.length));n[t]={x:Math.floor(Math.random()*e.width),y:l.y,h:l.h,w:l.w,fill:l.fill,speed:5}},400/c)}function g(){t.fillStyle=i.fill,"right"===i.dir?(t.clearRect(i.x-i.speed,i.y-1,i.w+2,i.h+2),t.fillRect(i.x=i.x+i.speed,i.y,i.w,i.h),i.x+i.w>=e.width&&(i.dir="left",1!=y&&(o+=25,h+=50,y=1))):(t.clearRect(i.x+i.speed,i.y-1,i.w+2,i.h+2),t.fillRect(i.x=i.x-i.speed,i.y,i.w,i.h),i.x<=0&&(i.dir="right",2!=y&&(o+=25,h+=50,y=2))),function(){if(Object.keys(n).length>0)for(let l in n)n[l].y<=e.height&&(o<100||n[l].y<=w)?(t.fillStyle=n[l].fill,t.save(),t.clearRect(n[l].x-1,n[l].y-n[l].speed,n[l].w+2,n[l].h+2),t.fillRect(n[l].x,n[l].y=n[l].y+n[l].speed,n[l].w,n[l].h),t.restore(),i.x<n[l].x+n[l].w&&n[l].x>i.x&&n[l].x<i.x+i.w&&i.y<n[l].y+n[l].h&&i.y+i.h>n[l].y&&(d=!0,cancelAnimationFrame(f),clearInterval(r))):(h+=10,document.getElementById("score").innerHTML=h,h%a==0&&(a+=500*++c,clearInterval(r),x()),delete n[l])}(),w>0?(console.log(w),t.fillStyle="#ffffff",t.clearRect(0,w+5,e.width,10),t.fillRect(0,w,e.width,10),(w-=5)<=0&&(o=0,t.clearRect(0,w,e.width,40))):o>=100&&(w=e.height,h+=250),document.getElementById("meter").value=o,!1===d?f=window.requestAnimationFrame(g.bind(f)):(t.font="48px arial",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#FFFFFF",t.fillText("Game Over",e.width/2,e.height/2))}return{changeDirection:function(){"left"===i.dir?i.dir="right":"right"===i.dir&&(i.dir="left")},init:function(){e.height=600,e.width=800,x(),g()}}}();game.init(),window.addEventListener("keyup",function(){game.changeDirection()});